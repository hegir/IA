<div class="width-100">
    <mat-card>
      <mat-card-content>
        <mat-card-title>{{'USERS_PREVIEW' | translate}}</mat-card-title>
        <div>
          <button type="button" mat-raised-button class="float-right add-button outline-unset"
            (click)="editUser('0')"><i class="material-icons add">add</i>
            {{'ADD_NEW_USER' | translate}}</button>
        </div>
        <br>
        <br>
        <div class=row>
          <div class="col-md-5">
            <mat-form-field class="example-full-width">
              <input matInput class="input" type="text" name="FullName" autocomplete="off" #searchText="ngModel" [(ngModel)]="SearchText"
                placeholder="{{'SEARCH_BY_FULLNAME_OR_USERNAME' | translate}}" (keydown.enter)="getUsers()" />
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <arni-autocomplete #citiesComponent displayField="Name" name="CityName"
            (onChange)="onSelectedCity($event)" [items]="cities" [selectedItem]="selectedCity" (click)="getCities()" (keydown.enter)="getUsers()"
            placeholder="{{'CITIES' | translate}}">
          </arni-autocomplete>
          </div>
          <div class="col-md">
            <button id="filter1-button" class="primary-button float-right-mobile filter-button-mobile" type="button" mat-raised-button color="primary"
              (click)="getUsers()"><i class="material-icons search">search</i>
              {{'FILTER' | translate}}</button>
          </div>
        </div>
        <p-table #dt [value]="users" sortField="FirstName" [rowsPerPageOptions]="[10,20,30,40]" [responsive]="true" [paginator]="true"
          sortOrder="-1" [rows]="10" (onLazyLoad)="loadUsers($event)" [totalRecords]="totalUsers" [lazy]="true" >
          <ng-template pTemplate="header">
            <tr>
              <th [pSortableColumn]="'FirstName'" class="text-right">
                <p-sortIcon [field]="'FirstName'"></p-sortIcon>
                {{'FULL_NAME' | translate}}
              </th>
              <th [pSortableColumn]="'Username'" class="text-right">
                <p-sortIcon [field]="'Username'"></p-sortIcon>
                {{'USERNAME' | translate}}
              </th>
              <th [pSortableColumn]="'BirthDate'" class="text-right">
                <p-sortIcon [field]="'BirthDate'"></p-sortIcon>
                {{'BIRTH_DATE' | translate}}
              </th>
              <th [pSortableColumn]="'CityName'" class="text-right">
                <p-sortIcon [field]="'CityName'"></p-sortIcon>
                {{'CITY_NAME' | translate}}
              </th>
              <th class="text-right">
                {{'OPTIONS' | translate}}
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-user>
            <tr>
              <td class="text-right"><span class="ui-column-title text-left float-left">{{ 'FULL_NAME' | translate }}</span><span class="float-right">{{user.FullName}}</span></td>
              <td class="text-right"  style="text-transform: none !important;"><span class="ui-column-title text-left float-left">{{ 'USERNAME' | translate }}</span><span class="float-right">{{user.Username}}</span></td>
              <td class="text-right"><span class="ui-column-title text-left float-left">{{ 'BIRTH_DATE' | translate }}</span><span class="float-right">{{user.BirthDate | dateFormat}}</span></td>
              <td class="text-right"><span class="ui-column-title text-left float-left">{{ 'CITY_NAME' | translate }}</span><span class="float-right">{{user.CityName}}</span></td>
              <td class="detail-icon"><span class="ui-column-title text-left float-left">{{ 'OPTIONS' | translate }}</span><i class="ti-pencil text-details m-r-7-negative" (click)="editUser(user.Id)"><span class="icon-text">
                    {{'DETAILS' | translate}}</span></i>
                <button type="button" [disabled]="user.HasMainOffices" [class.disabled]="!user.HasMainOffices"
                  class="border-none-important outline-unset background-inherit" (click)="removeUser(user.Id)">
                  <i class="ti-trash m-r-12-negative"><span class="icon-text">{{'DELETE' | translate}}</span></i></button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td [attr.colspan]="5" class="text-center">
                <strong>{{'NO_DATA_FOR_SELECTED_FILTERS' | translate}}</strong>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </mat-card-content>
    </mat-card>
  </div>
